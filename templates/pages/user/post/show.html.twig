{% extends 'layouts/base.html.twig' %}

{% block title %}{{ post.title }} - {{ parent() }}{% endblock %}

{% block main %}
    <div class="mb-3">
        <h2>{{ post.title }}</h2>
        {% set date = (post.updatedAt != null) ? post.updatedAt : post.publishedAt %}
        <span class="text-muted">{{ date|format_datetime('long', 'none', locale='en') }}</span>
    </div>
    <article class="post-content container">
        {{ post.content|sanitize_html }}
    </article>
    <div class="mt-3">
        <h3>Comments section</h3>
        {% set validComments = post.comments|filter(c => c.valid) %}
        {% if validComments is empty %}
            <span class="text-muted">Be the first to leave a comment</span>
        {% else %}
            <ul>
                {% for c in validComments %}
                    <li>{{ c.content }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endblock %}
